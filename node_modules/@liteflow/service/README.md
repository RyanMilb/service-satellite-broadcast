# @liteflow/service

- [Installation](#installation)
- [Service](#service)
- [Task](#task)

# Installation

```bash
npm install @liteflow/service
```

# Service

```javascript
const Service = require('@liteflow/service')

const liteflow = new Service()
```

## Task

The service have to call `liteflow.listenTask` to start listening for task to execute by passing an object containing the tasks' key and function.

```javascript
liteflow.listenTask({
  'TASK_1_KEY': (inputs) => {
    // Function of the task 1
    // Can directly throw error
    if (inputs.foo === undefined) {
      throw new Error('foo is undefined')
    }
    // Return an object
    return { foo: inputs.a + 'bar' }
  }, 
  'TASK_2_KEY': async (inputs) => {
    // Function of the task 2
    // Return an Promise containing an object
    const response = await fetch('...')
    return response.json()
  },
})
```

The task functions accept `inputs` as parameter and returns the `outputs` as object or Promise of object.
The task function can throw an Error in case of error. The lib will catch it and send it to the MESG Engine.
